{"createdAt":"2025-07-14T07:44:43.310Z","updatedAt":"2025-10-02T17:28:12.126Z","id":"NzLyjGytgQ5aXPIF","name":"Check Bearer Token","active":false,"isArchived":true,"nodes":[{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-192,-208],"id":"0f0ffcc3-7fdc-4d22-9237-b51987dc5a13","name":"When Executed by Another Workflow"},{"parameters":{"jsCode":"// n8n Code Node - Простая проверка JWT токена для MVP\nconst jwt = require('jsonwebtoken');\n\n// Секретный ключ (тот же что для создания)\nconst JWT_SECRET = $env.JWT_SECRET;\n\n// Получаем токен\nlet token = $input.first().json.authorization;\n\n// Убираем Bearer если есть\nif (token && token.startsWith('Bearer ')) {\n  token = token.replace('Bearer ', '');\n}\n\nif (!token) {\n  return {\n    success: false,\n    error: 'No token provided'\n  };\n}\n\ntry {\n  // Проверяем токен\n  const decoded = jwt.verify(token, JWT_SECRET);\n  \n  return {\n    success: true,\n    data: decoded\n  };\n  \n} catch (error) {\n  return {\n    success: false,\n    error: 'Invalid token'\n  };\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[16,-208],"id":"60d03711-a879-4b6a-8523-0d58f559e69e","name":"Code"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Code","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywidGdfaWQiOiI2NDE2Mzg0NzkiLCJpYXQiOjE3NTI0ODQ3NTksImV4cCI6MTc1MjU3MTE1OX0.PlBVdTsQSUl-3suds6Bi0IUQcOKn6FZc_QCevtV6raM"}}]},"versionId":"5e444dc5-8ecf-43ce-a09e-6a564f3a1fe2","triggerCount":0,"shared":[{"createdAt":"2025-07-14T07:44:43.310Z","updatedAt":"2025-07-14T07:44:43.310Z","role":"workflow:owner","workflowId":"NzLyjGytgQ5aXPIF","projectId":"vI2eXglKNLswvn2H"}],"tags":[]}